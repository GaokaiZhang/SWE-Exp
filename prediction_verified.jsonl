{"model_name_or_path": "DeepSeek_IA", "instance_id": "django__django-12125", "model_patch": "--- a/django/db/migrations/serializer.py\n+++ b/django/db/migrations/serializer.py\n@@ -269,7 +269,7 @@\n             if module == builtins.__name__:\n                 return self.value.__name__, set()\n             else:\n-                return \"%s.%s\" % (module, self.value.__name__), {\"import %s\" % module}\n+                return \"%s.%s\" % (module, self.value.__qualname__), {\"import %s\" % module}\n \n \n class UUIDSerializer(BaseSerializer):\n", "leaf_id": 10, "source_tree_path": "tmp/trajectory/django__django-12125/2025-11-19_trajectory.json"}
{"model_name_or_path": "DeepSeek_IA", "instance_id": "django__django-12754", "model_patch": "--- a/django/db/migrations/autodetector.py\n+++ b/django/db/migrations/autodetector.py\n@@ -165,6 +165,8 @@\n \n         # Generate non-rename model operations\n         self.generate_deleted_models()\n+        # Generate field removal operations before creating models to avoid field clashes\n+        self.generate_removed_fields()\n         self.generate_created_models()\n         self.generate_deleted_proxies()\n         self.generate_created_proxies()\n@@ -181,7 +183,6 @@\n         self.generate_removed_indexes()\n         # Generate field operations\n         self.generate_renamed_fields()\n-        self.generate_removed_fields()\n         self.generate_added_fields()\n         self.generate_altered_fields()\n         self.generate_altered_unique_together()\n", "leaf_id": 16, "source_tree_path": "tmp/trajectory/django__django-12754/2025-11-19_trajectory.json"}
{"model_name_or_path": "DeepSeek_IA", "instance_id": "django__django-13128", "model_patch": "--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -298,7 +298,24 @@\n         If all sources are None, then an error is raised higher up the stack in\n         the output_field property.\n         \"\"\"\n-        sources_iter = (source for source in self.get_source_fields() if source is not None)\n+        sources = [source for source in self.get_source_fields() if source is not None]\n+        \n+        # Special handling for temporal arithmetic operations\n+        # Check if this is a subtraction operation between DateTimeFields\n+        if (hasattr(self, 'connector') and self.connector == '-' and \n+            len(sources) == 2 and \n+            all(isinstance(source, fields.DateTimeField) for source in sources)):\n+            return fields.DurationField()\n+        \n+        # Check for mixed DateTimeField and DurationField in addition/subtraction\n+        if (hasattr(self, 'connector') and self.connector in ['+', '-'] and \n+            len(sources) == 2):\n+            datetime_fields = [s for s in sources if isinstance(s, fields.DateTimeField)]\n+            duration_fields = [s for s in sources if isinstance(s, fields.DurationField)]\n+            if len(datetime_fields) == 1 and len(duration_fields) == 1:\n+                return fields.DateTimeField()\n+        \n+        sources_iter = (source for source in sources)\n         for output_field in sources_iter:\n             for source in sources_iter:\n                 if not isinstance(output_field, source.__class__):\n", "leaf_id": 6, "source_tree_path": "tmp/trajectory/django__django-13128/2025-11-19_trajectory.json"}
